"use strict";

var getType = function getType(x) {
  var str = Object.prototype.toString.call(x),
      longType = str.substring(8, str.length - 1);
  return longType.toLowerCase();
};

exports.getType = getType;

exports.encode = function (value) {
  switch (getType(value)) {
    case "string":
      return ":" + value;
      break;

    default:
      return String(value);
      break;
  }
};

exports.decode = function (text) {
  if (text.match(/^:/)) {
    return text.substr(1);
  }

  if (text.match(/^[-\d]+/)) {
    return Number(text);
  }

  if (text.match(/^\//)) {
    var content = text.substr(1);
    content = content.replace(/\//, "\\/");
    return new RegExp(text.substr(1));
  }

  switch (text) {
    case "true":
      return true;
      break;

    case "false":
      return false;
      break;

    case "undefined":
      return undefined;
      break;

    case "null":
      return null;
      break;

    case "Infinity":
      return Infinity;
      break;

    default:
      throw new Error("not a valid value: " + JSON.stringify(text));
      return a;
      break;
  }
};