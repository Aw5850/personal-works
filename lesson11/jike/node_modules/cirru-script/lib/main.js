var compiler, req, setCompiled, setSource;

compiler = require('./compiler');

require('./main.css');

setSource = function(code) {
  var source;
  source = document.querySelector('#source');
  return source.value = code;
};

setCompiled = function(code) {
  var compiled;
  compiled = document.querySelector('#compiled');
  return compiled.value = code;
};

req = new XMLHttpRequest;

req.open('GET', './examples/assign.cirru');

req.send();

req.onload = function() {
  var code, js;
  code = req.responseText;
  setSource(code);
  js = compiler.compile(code);
  return setCompiled(js);
};

window.onload = function() {
  var source;
  source = document.querySelector('#source');
  return source.oninput = function(event) {
    var code, error, error1, js;
    code = source.value;
    try {
      js = compiler.compile(code);
      return setCompiled(js);
    } catch (error1) {
      error = error1;
      return setCompiled(error);
    }
  };
};
